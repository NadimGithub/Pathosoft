{% extends 'base.html' %}
{% load static %}
{% block title %}Test Methods{% endblock %}
{% block content %}

<!-- ======================== MAIN CONTAINER ======================== -->

<link rel="stylesheet" href="{% static 'css/form-style.css' %}">

<div class="container-fluid my-5 d-flex justify-content-center">
  <div class="card lab-card shadow-lg border-0 rounded-4 w-95">

    <!-- ===== Card Header ===== -->
    <div class="card-header d-flex align-items-center justify-content-between rounded-top-4">
      <h4 class="mb-0 text-white">
        <i class="fa-solid fa-flask me-2"></i> Test Methods
      </h4>
      <a href="{% url 'method_add' %}" class="btn btn-light btn-sm fw-semibold rounded-pill px-3 hover-glow">
        <i class="fa-solid fa-plus me-1"></i> Add New Method
      </a>
    </div>

    <!-- ===== Card Body: Table Section ===== -->
    <div class="card-body p-4">

      <div class="table-responsive">
        <table class="table table-hover table-bordered align-middle">
          <thead class="table-success text-center">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Method Name</th>
              <th scope="col">Formula</th>
              <th scope="col">Description</th>
              <th scope="col">Status</th>
              <th scope="col">Created At</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for method in methods %}
            <tr>
              <td class="text-center">{{ method.method_id }}</td>
              <td>{{ method.method_name }}</td>
              <td>{{ method.formula|default:"-" }}</td>
              <td>{{ method.method_description|truncatewords:10 }}</td>
              <td class="text-center">
                {% if method.status %}
                  <span class="badge bg-success px-3 py-2">Active</span>
                {% else %}
                  <span class="badge bg-danger px-3 py-2">Inactive</span>
                {% endif %}
              </td>
              <td class="text-center">{{ method.created_at|date:"d-m-Y" }}</td>
              <td class="text-center">
                <a href="{% url 'method_update' method.pk %}" class="btn btn-sm btn-primary rounded-pill px-3 me-2">
                  <i class="fa-solid fa-pen-to-square"></i> Edit
                </a>
                <a href="{% url 'method_delete' method.pk %}" 
                   class="btn btn-sm btn-danger rounded-pill px-3"
                   onclick="return confirm('Are you sure you want to delete this method?');">
                  <i class="fa-solid fa-trash"></i> Delete
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="7" class="text-center text-muted py-4">
                <i class="fa-regular fa-circle-xmark me-2"></i> No methods found
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>

{% endblock %}
